#include <LPC21XX.H>
#include "delay_lcd.h"
#define lcd_d 0xFF <<0
#define RS 1<<8
#define E 1<<9

void LCD_INITI(void);
void LCD_COMMAND(unsigned char);
void LCD_DATA(unsigned char);
void LCD_str(unsigned char *);
 void LCD_int (int );
 void LCD_float ( float );

int main()
{
  LCD_INITI();
	while(1)
	{
	LCD_COMMAND(0x80);
	//LCD_DATA('J');
	//LCD_str("Jesus is my saviour");
	//LCD_int(1234);
	//LCD_float(22.7);
 }
 
}
void LCD_INITI(void)
{
	 IODIR0=lcd_d|RS|E;
	 LCD_COMMAND(0x01);
	 LCD_COMMAND(0x02);
	 LCD_COMMAND(0x0C);
	 LCD_COMMAND(0x38);
	
	
}


void LCD_COMMAND(unsigned char cmd )
{

 //IOCLR0=lcd_d;
	//IOSET0=cmd;
	IOPIN0=(IOPIN0&0XFFFFFF00)|cmd;
	IOCLR0=RS;
	IOSET0=E;
	delay_ms(2);
	IOCLR0=E;

}


void LCD_DATA(unsigned char d )
 {

 //IOCLR0=lcd_d;
	//IOSET0=d;
	IOPIN0=(IOPIN0&0XFFFFFF00)|d;
	IOSET0=RS;
	IOSET0=E;
	delay_ms(2);
	IOCLR0=E;

 }      
 
   
 void LCD_str(unsigned char *s)
 {
	  unsigned  int count=0;
    while(*s)
		{
      LCD_DATA(*s++);
			count++;
      if(count==16)
			LCD_COMMAND(0xC0);
   }

}

  void LCD_int (int n)
{
    unsigned char a[5];
	  signed char i=0;
	if (n==0)
	LCD_DATA('0');
	else 	
	{
		if (n<0)
		{
		LCD_DATA ('-');
		n=-n;
   }
   
	while(n>0)
	{
    a[i++]=n%10;
		n=n/10;
	
  }
     for(--i;i>=0;i--)
	   LCD_DATA(a[i]+48);
  }
}
 

 void LCD_float (float f)
{
	
	int temp;
	temp=f;
	LCD_int(temp);
	LCD_DATA('.');
	temp=(f-temp)*100;
	LCD_int(temp);
}


        



 
 
 
 
 
 
 
 
 
